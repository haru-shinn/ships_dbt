// .devcontainer/devcontainer.json
{
    "name": "ships_container",
    "dockerComposeFile": [
        "../docker-compose.yml"
    ],
    "service": "dbt",
    "workspaceFolder": "/app/",
    // コンテナ起動後に実行されるコマンド
    "postCreateCommand": "dbt --version",
    // 開発に必要な VS Code 拡張機能
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python", // Python 開発用
                "ms-python.vscode-pylance", // 高速な型チェック・補完
                "innoverio.vscode-dbt-power-user", // dbt関連
                // "sqlfluff.vscode-sqlfluff", // SQL Lint
                // "dagster.dagster", // Dagster 用
                "davidanson.vscode-markdownlint", // Markdown Lint
                "yzhang.markdown-all-in-one" // Markdown 編集支援
            ]
        }
    },
    // Dagster UI用のポート開放
    "forwardPorts": [
        3000
    ],
    "mounts": [
        "source=${localEnv:SSH_AUTH_SOCK},target=/tmp/vscode-ssh-auth.sock,type=bind"
    ],
    "containerEnv": {
        "SSH_AUTH_SOCK": "/tmp/vscode-ssh-auth.sock"
    },
    "remoteUser": "root"
}